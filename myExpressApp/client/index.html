<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>MiM Mixer</title>

    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>

    <script src="js/view.js"></script>
    <script src="js/waveformDrawer.js"></script>
    <script src="js/track.js"></script>
    <script src="js/song.js"></script>
    <script src="js/buffer-loader.js"></script>
    <script src="js/sound.js"></script>
    <script src="js/jquery.knob.js"></script>
    <script src="js/knob.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/canvasArrows.js"></script>
    <script src="js/range-touch.js"></script>
    <script src="js/recorderjs/recorder.js"></script>
    <script defer src="js/daw-resize.js"></script>

    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" />
    <link
      href="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" type="text/css" href="css/style.css" />

    <!-- particles.js (CDN) -->
    <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
    <script defer src="js/particles-init.js"></script>
  </head>

  <body onload="init();">
    <!-- Background -->
    <div id="particles-js" aria-hidden="true"></div>
    <div id="bg-vignette" aria-hidden="true"></div>

    <div id="app">
      <header class="topbar">
        <div class="brand">
          <div class="brandMark" aria-hidden="true"></div>
          <div class="brandText">
            <div class="brandTitle">MiM Mixer</div>
            <div class="brandSub">Grayscale DAW layout</div>
          </div>
        </div>

        <div class="topRight">
          <div class="statusPill">
            <span class="dot"></span>
            Live
          </div>
        </div>
      </header>

      <!-- Messages (minimal, DAW-style) -->
      <div id="console" class="panel panelSlim">
        <div class="panelHeader">
          <div class="panelTitle">Console</div>
          <div class="panelHint">Status & tips</div>
        </div>
        <div class="panelBody">
          <div id="messages">Please choose a song!</div>
        </div>
      </div>

      <!-- DAW: top arrangement + bottom mixer -->
      <section id="daw">
        <!-- TOP: Arrangement / wave view -->
        <div class="panel panelTall">
          <div class="panelHeader">
            <div class="panelTitle">Arrangement</div>
            <div class="panelHint">Wave + timeline</div>
          </div>

          <div class="panelBody">
            <div class="waveWrap">
              <canvas id="waveCanvas"></canvas>
            </div>

            <div class="timelineWrap">
              <div class="timelineStage">
                <canvas
                  id="myCanvas"
                  width="602"
                  height="400"
                  style="position: absolute; left: 0; top: 0; z-index: 0"
                ></canvas>
                <canvas
                  id="frontCanvas"
                  style="position: absolute; left: 0; top: 0; z-index: 1"
                ></canvas>
              </div>
            </div>
          </div>
        </div>

        <!-- BOTTOM: Mixer -->
        <div class="panel panelMixer">
          <div class="panelHeader">
            <div class="panelTitle">Mixer</div>
            <div class="panelHint">Transport • Master • Channels</div>
          </div>

          <div class="panelBody mixerBody">
            <!-- Master / transport / song picker -->
            <div id="masterTools" class="masterStrip">
              <div class="masterLeft">
                <div class="sectionLabel">Transport</div>

                <div class="transportRow">
                  <button
                    id="bplay"
                    type="button"
                    class="btn btn-default btn-lg dawBtn"
                    onclick="playAllTracks(0);"
                    disabled
                    title="Play"
                  >
                    <span class="glyphicon glyphicon-play"></span>
                  </button>

                  <button
                    id="bpause"
                    onclick="pauseAllTracks();"
                    disabled
                    type="button"
                    class="btn btn-default btn-lg dawBtn"
                    title="Pause"
                  >
                    <span class="glyphicon glyphicon-pause"></span>
                  </button>

                  <button
                    id="bstop"
                    onclick="stopAllTracks();"
                    type="button"
                    class="btn btn-default btn-lg dawBtn"
                    disabled
                    title="Stop"
                  >
                    <span class="glyphicon glyphicon-stop"></span>
                  </button>

                  <button
                    id="brecord"
                    onclick="addNewTrackForRecord();"
                    type="button"
                    class="btn btn-default btn-lg dawBtn"
                    disabled
                    title="Record track"
                  >
                    <span class="glyphicon glyphicon-record"></span>
                  </button>

                  <button
                    id="brecordMix"
                    onclick="toggleRecordMix();"
                    type="button"
                    class="btn btn-default btn-lg dawBtn dawBtnTiny"
                    disabled
                    title="Record mix"
                  >
                    Record mix
                  </button>
                </div>

                <div class="sectionLabel">Loop</div>
                <div id="loopBox" class="loopRow">
                  <button
                    id="loopStart"
                    onclick="setLoopStart();"
                    type="button"
                    class="btn btn-default btn-lg dawBtn dawBtnTiny"
                    disabled
                  >
                    Start loop
                  </button>

                  <button
                    id="loopEnd"
                    onclick="setLoopEnd();"
                    type="button"
                    class="btn btn-default btn-lg dawBtn dawBtnTiny"
                    disabled
                  >
                    End loop
                  </button>

                  <button
                    id="loopReset"
                    onclick="resetSelection();"
                    type="button"
                    class="btn btn-default btn-lg dawBtn dawBtnTiny"
                    disabled
                  >
                    Reset loop
                  </button>

                  <button
                    onclick="loopOnOff();"
                    id="loopOnOff"
                    type="button"
                    class="btn btn-default btn-lg dawBtn"
                    disabled
                    title="Loop on/off"
                  >
                    <span class="glyphicon glyphicon-repeat"></span>
                  </button>
                </div>

                <div class="sectionLabel">Song</div>
                <div id="songs" class="dawSelect"></div>
              </div>

              <div class="masterRight">
                <div class="sectionLabel">Master</div>
                <div class="masterVolumeWrap">
                  <button
                    id="bsound"
                    onclick="masterMuteUnmute(this);"
                    type="button"
                    class="btn btn-default btn-lg dawBtn"
                    title="Mute / Unmute master"
                  >
                    <span class="glyphicon glyphicon-volume-up"></span>
                  </button>

                  <input
                    id="masterVolume"
                    class="knob masterVolume"
                    data-width="92"
                    data-height="92"
                    data-displayInput="false"
                    value="100"
                  />
                </div>
              </div>
            </div>

            <!-- Channels -->
            <div id="scroll" class="channelsArea">
              <div class="channelsHeader">
                <div class="sectionLabel">Channels</div>
                <div class="hint">Faders are left → right</div>
              </div>

              <div class="tracksWrap">
                <table id="tracks"></table>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>
  </body>
</html>
